{"title":"react16 ç³»åˆ—ï¼ˆ1ï¼‰","slug":"react16 ç³»åˆ—ï¼ˆ1ï¼‰ ","date":"2019-02-24T04:20:08.113Z","updated":"2019-02-24T04:20:08.113Z","comments":true,"path":"api/articles/react16 ç³»åˆ—ï¼ˆ1ï¼‰ .json","photos":[],"link":"","excerpt":"å‰è¨€è¿‘æ¥ä¸€ç›´å¿™å…¶ä»–äº‹ï¼Œæ²¡æ€ä¹ˆå’Œ react æ‰“è¿‡æ‹›å‘¼äº†ï¼Œè½¬çœ¼ react å·²ç»è·Ÿæ–°åˆ°äº† 16.2 ç‰ˆæœ¬ï¼Œå¹¶ä¸”å¸¦æ¥äº†å¾ˆå¤šé‡è¦çš„å˜æ›´:","covers":["https://ws2.sinaimg.cn/large/006tKfTcly1fnxip7ozvqj30ui0a8q5d.jpg","https://ws1.sinaimg.cn/large/006tKfTcly1fnxiwggv1hj30zk0i8n1r.jpg","https://ws3.sinaimg.cn/large/006tKfTcly1fnxlwcb6jtj314a0d6n13.jpg","https://ws1.sinaimg.cn/large/006tKfTcly1fnxp1g0m4lj30la01cdg6.jpg","https://ws3.sinaimg.cn/large/006tKfTcly1fnxphwax6mj31kw0s2469.jpg"],"content":"<h3 id=\"å‰è¨€\"><a href=\"#å‰è¨€\" class=\"headerlink\" title=\"å‰è¨€\"></a>å‰è¨€</h3><hr>\n<p>è¿‘æ¥ä¸€ç›´å¿™å…¶ä»–äº‹ï¼Œæ²¡æ€ä¹ˆå’Œ react æ‰“è¿‡æ‹›å‘¼äº†ï¼Œè½¬çœ¼ react å·²ç»è·Ÿæ–°åˆ°äº† 16.2 ç‰ˆæœ¬ï¼Œå¹¶ä¸”å¸¦æ¥äº†å¾ˆå¤šé‡è¦çš„å˜æ›´:</p>\n<a id=\"more\"></a>\n<ul>\n<li>render å¯ä»¥è¿”å›å­—ç¬¦ä¸²ï¼ˆStringï¼‰å’Œç‰‡æ®µï¼ˆfragments)</li>\n<li>Error Boundary å¤„ç†é”™è¯¯ç»„ä»¶</li>\n<li>Portals å°†ç»„ä»¶æ¸²æŸ“åˆ°å½“å‰ç»„ä»¶æ ‘å¤–</li>\n<li>æ”¯æŒè‡ªå®šä¹‰ DOM å±æ€§</li>\n<li>setState ä¼ å…¥ null æ—¶ä¸ä¼šå‡ºå‘æ›´æ–°</li>\n<li>å‡å°‘æ–‡ä»¶å¤§å°</li>\n<li>ä¼˜åŒ–æœåŠ¡å™¨ç«¯æ¸²æŸ“æ–¹å¼</li>\n</ul>\n<h3 id=\"render-å¯ä»¥è¿”å›å­—ç¬¦ä¸²ï¼ˆStringï¼‰å’Œç‰‡æ®µï¼ˆfragments\"><a href=\"#render-å¯ä»¥è¿”å›å­—ç¬¦ä¸²ï¼ˆStringï¼‰å’Œç‰‡æ®µï¼ˆfragments\" class=\"headerlink\" title=\"render å¯ä»¥è¿”å›å­—ç¬¦ä¸²ï¼ˆStringï¼‰å’Œç‰‡æ®µï¼ˆfragments)\"></a>render å¯ä»¥è¿”å›å­—ç¬¦ä¸²ï¼ˆStringï¼‰å’Œç‰‡æ®µï¼ˆfragments)</h3><hr>\n<p>ç°åœ¨çš„ render æ–¹æ³•å¯ä»¥è¿”å›å­—ç¬¦ä¸²ï¼Œéå¸¸ç®€å•ï¼š</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"built_in\">String</span> = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"hello world\"</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ws2.sinaimg.cn/large/006tKfTcly1fnxip7ozvqj30ui0a8q5d.jpg\" alt=\"å›¾ç‰‡\"></p>\n<p>render è¿”å›ç‰‡æ®µï¼Œæ˜¯ä¸ªæ•°ç»„ç±»å‹ï¼Œhtml å…ƒç´ éœ€è¦å¸¦ä¸Š keyï¼Œï¼ˆå®˜æ–¹è¯´å¯èƒ½ä¹‹åä¸ç”¨å†å†™ key äº†ï¼Œå“‡èµæˆçš„ä¸¾ä¸ªæ‰‹ï¼‰ğŸ‘‹ï¼š</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> FragmentDemo1 = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> [</span><br><span class=\"line\">    <span class=\"string\">\"Some Text.\"</span>,</span><br><span class=\"line\">    &lt;h2 key=<span class=\"string\">\"heading-1\"</span>&gt;A heading&lt;<span class=\"regexp\">/h2&gt;,</span></span><br><span class=\"line\"><span class=\"regexp\">    \"More text.\",</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;h2 key=\"heading-2\"&gt;Another heading&lt;/</span>h2&gt;,</span><br><span class=\"line\">    <span class=\"string\">\"Even more text.\"</span></span><br><span class=\"line\">  ];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>react16.2 æ–°å‡ºäº†ä¸€ä¸ªè¯­æ³•ç³– Fragmentï¼Œå®˜æ–¹å®šä¹‰å¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>Fragments look like empty JSX tags. They let you group a list of children without adding extra nodes to the DOMï¼š</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">render() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;&gt;</span><br><span class=\"line\">      &lt;ChildA /&gt;</span><br><span class=\"line\">      &lt;ChildB /&gt;</span><br><span class=\"line\">      &lt;ChildC /&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  );</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>ä¹Ÿå°±æ˜¯è¯´ç›¸å½“äºä¸€ä¸ªç©ºçš„ jsx æ ‡ç­¾ï¼Œå…·ä½“ç”¨æ³•ï¼š</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> FragmentDemo2 = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Fragment&gt;</span><br><span class=\"line\">      Some text.</span><br><span class=\"line\">      &lt;h3&gt;A heading &lt;<span class=\"regexp\">/h3&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      More text.</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;h1&gt;Another heading&lt;/</span>h1&gt;</span><br><span class=\"line\">      Even more text.</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/Fragment&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  );</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ws1.sinaimg.cn/large/006tKfTcly1fnxiwggv1hj30zk0i8n1r.jpg\" alt=\"å›¾ç‰‡\"></p>\n<h3 id=\"Error-Boundary-å¤„ç†é”™è¯¯ç»„ä»¶\"><a href=\"#Error-Boundary-å¤„ç†é”™è¯¯ç»„ä»¶\" class=\"headerlink\" title=\"Error Boundary å¤„ç†é”™è¯¯ç»„ä»¶\"></a>Error Boundary å¤„ç†é”™è¯¯ç»„ä»¶</h3><hr>\n<p>åœ¨ UI ä¸­çš„ä¸€ä¸ª javascript é”™è¯¯ï¼Œä¸åº”è¯¥è®©æ•´ä¸ªåº”ç”¨å´©æºƒï¼Œåƒçš®çƒä¸€æ ·ï¼Œæ“ä¸ªæ´å°±ç‚¸äº†ã€‚</p>\n<p>ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œreact16 æä¾›äº†ä¸€æ–°çš„æ¦‚å¿µ Error Boundaryï¼š</p>\n<blockquote>\n<p>å¯ä»¥æ•è·å®ƒçš„å­ç»„ä»¶æ ‘çš„ä»»ä½• javascript é”™ï¼Œlog é”™è¯¯ä¿¡æ¯ï¼Œå¹¶ç”¨ä¸€ä¸ª component å–ä»£å¥”æºƒçš„ç»„ä»¶æ ‘ã€‚åŒ…æ‹¬ rendering æ—¶çš„é”™è¯¯ï¼Œç”Ÿå‘½å‘¨æœŸä¸­çš„é”™è¯¯ï¼Œä»¥åŠå­ç»„ä»¶ä¸­çš„ constructor ä¸­é”™è¯¯ã€‚å¦‚æœ  Error Boundary å¤„ç†å¤±è´¥ï¼Œä¼šä¸Šæµ®åˆ°ç¦»å®ƒæœ€è¿‘çš„ä¸€ä¸ª Error Boundary ä¸Šï¼Œç›¸ä¼¼äº catch {}</p>\n<p>æ³¨ï¼šæ˜¯åªèƒ½æ•è·å­ç»„ä»¶æ ‘ï¼Œä¸èƒ½æ•è·å®ƒè‡ªèº«çš„é”™è¯¯ã€‚</p>\n</blockquote>\n<p>æ€ä¹ˆç”¨å‘¢ï¼Ÿåªéœ€è¦åœ¨ä¸€ä¸ª class Component åŠ ä¸Š componentDidCatchï¼Œè¿™ä¸ªç»„ä»¶å°±å˜æˆ Error Boundary Component äº†</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ErrorBoundary</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(props) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(props);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.state = &#123; <span class=\"attr\">hasError</span>: <span class=\"literal\">false</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  componentDidCatch(error, info) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Dispay fallback UI</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setState(&#123; <span class=\"attr\">hasError</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\">    <span class=\"comment\">// You can also log the error to an error reporting servics</span></span><br><span class=\"line\">    <span class=\"comment\">// logErrorToMyServics(error, info);</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(error, info);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.state.hasError) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Something went wrong.<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.props.children;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ³¨ï¼šä¹Ÿåªæœ‰ class Compoent æ‰èƒ½å˜æˆ Error Boundary Component</p>\n<p>ç„¶åå¯ä»¥ç”¨äºæ™®é€šç»„ä»¶ï¼š</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;ErrorBoundary&gt;</span><br><span class=\"line\">  &lt;<span class=\"built_in\">String</span> /&gt;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/ErrorBoundary&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"built_in\">String</span> = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'å“‡å“‡å“‡ï¼Œå‡ºé”™å•¦å‡ºé”™å•¦'</span>)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"hello world\"</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ws3.sinaimg.cn/large/006tKfTcly1fnxlwcb6jtj314a0d6n13.jpg\" alt=\"å›¾ç‰‡\"></p>\n<p>ç°åœ¨æˆ‘ä»¬äº†è§£äº† Error Boundary çš„ä½œç”¨åŠå…¶ç”¨æ³•ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥ç”¨åœ¨å“ªé‡Œå‘¢ï¼Ÿ</p>\n<p>è¿™ä¸»è¦å–å†³äºä½ éœ€è¦åšå¤šç»†ç²’åº¦çš„æ§åˆ¶ã€‚å¯ä»¥ç”¨äºåŒ…è£¹é¡¶å±‚ route componentï¼Œå½“åº”ç”¨å‘ç”Ÿé”™è¯¯çš„æ—¶å€™ç°å® â€œå‡ºç°äº†æŸç§ç±»å‹çš„é”™è¯¯â€ ç»™ç”¨æˆ·ã€‚æˆ–è€…ä¸“é—¨æ§åˆ¶ä¸€äº›å°çš„å­ç»„ä»¶ï¼Œé˜²æ­¢å­ç»„ä»¶å¥”æºƒçš„æ—¶å€™å½±å“æ•´ä¸ªåº”ç”¨ã€‚</p>\n<p>æ³¨ï¼šå¦‚æœæ²¡ä½¿ç”¨ Error Boundaryï¼Œå‡ºç°é”™è¯¯ï¼Œreact ä¼šå¸è½½æ•´ä¸ªç»„ä»¶æ ‘ï¼Œè¯¦ç»†åŸå› çœ‹<a href=\"https://reactjs.org/blog/2017/07/26/error-handling-in-react-16.html\" target=\"_blank\" rel=\"noopener\">ä¼ é€é—¨</a></p>\n<h3 id=\"Portals-å°†ç»„ä»¶æ¸²æŸ“åˆ°å½“å‰ç»„ä»¶æ ‘å¤–\"><a href=\"#Portals-å°†ç»„ä»¶æ¸²æŸ“åˆ°å½“å‰ç»„ä»¶æ ‘å¤–\" class=\"headerlink\" title=\"Portals å°†ç»„ä»¶æ¸²æŸ“åˆ°å½“å‰ç»„ä»¶æ ‘å¤–\"></a>Portals å°†ç»„ä»¶æ¸²æŸ“åˆ°å½“å‰ç»„ä»¶æ ‘å¤–</h3><hr>\n<p>ä½¿ç”¨ react çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘æƒ³åœ¨çˆ¶ç»„ä»¶ä¸º overflow: hidden çš„æƒ…å†µä¸‹æŠŠå­ç»„ä»¶æ˜¾ç¤ºå‡ºæ¥æ€ä¹ˆåŠï¼Ÿä¾‹å¦‚ html5.2 æ–°å‡ºçš„ dialogï¼Œæˆ–è€…hovercardsã€tooltips</p>\n<p>Portals å°±æ˜¯ä¸ºè§£å†³è¿™ç§é—®é¢˜è€Œå¼€å‘å‡ºæ¥ï¼Œå®ƒå¯ä»¥å°†ä¸€ä¸ªç»„ä»¶æ¸²æŸ“åˆ°å…¶ä»– DOM èŠ‚ç‚¹å»ï¼Œè€Œä¸åœ¨å½“å‰çš„çˆ¶èŠ‚ç‚¹ä¸‹ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">render() &#123;</span><br><span class=\"line\">  <span class=\"comment\">// React does *not* create a new div. It renders the children into `domNode`.</span></span><br><span class=\"line\">  <span class=\"comment\">// `domNode` is any valid DOM node, regardless of its location in the DOM.</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> ReactDOM.createPortal(</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.props.children,</span><br><span class=\"line\">    domNode,</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ³¨ï¼šè™½ç„¶ Portal ç»„ä»¶æ¸²æŸ“åˆ°å…¶ä»– DOM èŠ‚ç‚¹ä¸‹äº†ï¼Œä½†æ˜¯ Portal ç»„ä»¶çš„å…¶ä»–æ–¹é¢çš„è¡Œä¸ºè¿˜æ˜¯å’Œæ­£å¸¸çš„ react child ä¸€æ ·ï¼ŒPortal ç»„ä»¶ä¸Šçš„äº‹ä»¶è¿˜æ˜¯ä¼ é€’åˆ°åŸæ¥çš„çˆ¶ç»„ä»¶ï¼Œè¿™å’Œ react çš„äº‹ä»¶ç³»ç»Ÿè®¾è®¡æœ‰å…³ï¼Œ<a href=\"https://reactjs.org/docs/portals.html\" target=\"_blank\" rel=\"noopener\">ä¼ é€é—¨</a></p>\n<h3 id=\"æ”¯æŒè‡ªå®šä¹‰-DOM-å±æ€§\"><a href=\"#æ”¯æŒè‡ªå®šä¹‰-DOM-å±æ€§\" class=\"headerlink\" title=\"æ”¯æŒè‡ªå®šä¹‰ DOM å±æ€§\"></a>æ”¯æŒè‡ªå®šä¹‰ DOM å±æ€§</h3><hr>\n<p>å¬è¯´ react16 æ–‡ä»¶å‡å°ï¼Œæ˜¯ä¸æ˜¯å¾ˆå¼€å¿ƒğŸ˜„ï¼Ÿ</p>\n<p>ä½†æ˜¯è¿™å’Œæˆ‘ä»¬çš„è‡ªå®šä¹‰ DOM å±æ€§æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ</p>\n<p>å› ä¸º react ä¸ç”¨å†æä¸€ä¸ªå±æ€§ç™½åå•äº†ï¼Œç›´æ¥æŠŠæ— æ³•è¯†åˆ«çš„ html å’Œ svg å±æ€§ä¼ é€’ç»™ DOMï¼š</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div nirenshiwoma=<span class=\"string\">\"ä¸è®¤è¯†ä½ è¿™ä¸ªå±æ€§è€¶\"</span>&gt;æˆ‘å¸¦äº†æ–°å±æ€§&lt;<span class=\"regexp\">/div&gt;</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ws1.sinaimg.cn/large/006tKfTcly1fnxp1g0m4lj30la01cdg6.jpg\" alt=\"å›¾ç‰‡\"></p>\n<h3 id=\"setState-ä¼ å…¥-null-æ—¶ä¸ä¼šå‡ºå‘æ›´æ–°\"><a href=\"#setState-ä¼ å…¥-null-æ—¶ä¸ä¼šå‡ºå‘æ›´æ–°\" class=\"headerlink\" title=\"setState ä¼ å…¥ null æ—¶ä¸ä¼šå‡ºå‘æ›´æ–°\"></a>setState ä¼ å…¥ null æ—¶ä¸ä¼šå‡ºå‘æ›´æ–°</h3><hr>\n<p>setState react å®˜æ–¹æè¿°å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>Calling <code>setState</code> with null no longer triggers an update. This allows you to decide in an updater function if you want to re-render.</li>\n<li>Calling <code>setState</code> directly in render always causes an update. This was not previously the case. Regardless, you should not be calling setState from render.</li>\n<li><code>setState</code> callbacks (second argument) now fire immediately after <code>componentDidMount</code> / <code>componentDidUpdate</code> instead of after all components have rendered.</li>\n</ul>\n<p>è¿™é‡Œç‚¹å‡» update æŒ‰é’®ä¸ä¼šè§¦å‘ render:</p>\n<p><img src=\"https://ws3.sinaimg.cn/large/006tKfTcly1fnxphwax6mj31kw0s2469.jpg\" alt=\"å›¾ç‰‡\"></p>\n<h3 id=\"å‡å°‘æ–‡ä»¶å¤§å°\"><a href=\"#å‡å°‘æ–‡ä»¶å¤§å°\" class=\"headerlink\" title=\"å‡å°‘æ–‡ä»¶å¤§å°\"></a>å‡å°‘æ–‡ä»¶å¤§å°</h3><hr>\n<p>ä»€ä¹ˆï¼Ÿå¢åŠ äº†è¿™ä¹ˆå¤šåŠŸèƒ½ï¼Œæ–‡ä»¶è¿˜å‡å°äº†ï¼Ÿã€æˆé¾™è„¸ã€‘</p>\n<p>æ²¡é”™ï¼Œä½ æ²¡å¬é”™ï¼Œå¦‚ Facebook å·¥ç¨‹å¸ˆæ‰€è¯´ï¼šæˆ‘ä»¬å¯¹ react è¿›è¡Œäº†é‡å†™</p>\n<p>èµï¼Œå–œæ¬¢çš„å°±æ˜¯è¿™èŒƒğŸ‘</p>\n<blockquote>\n<p><code>react</code>åŒ…çš„å¤§å°ä»20.7kbä¸‹é™åˆ°5.3kbï¼ˆgzipå‹ç¼©åå¤§å°ä»6.9kbä¸‹é™åˆ°2.2kbï¼‰ã€‚</p>\n<p><code>react-dom</code>åŒ…çš„å¤§å°ä»141kbä¸‹é™åˆ°103.7kbï¼ˆgzipå‹ç¼©åå¤§å°ä»42.9kbä¸‹é™åˆ°103.7kbï¼‰ã€‚</p>\n<p><code>react</code>+<code>react-dom</code>åŒ…æ€»å¤§å°ä»161.7kbä¸‹é™åˆ°109kbï¼ˆgzipå‹ç¼©åå¤§å°ä»49.8kbä¸‹é™åˆ°34.8kbï¼‰ã€‚</p>\n</blockquote>\n<h3 id=\"ä¼˜åŒ–æœåŠ¡å™¨ç«¯æ¸²æŸ“æ–¹å¼\"><a href=\"#ä¼˜åŒ–æœåŠ¡å™¨ç«¯æ¸²æŸ“æ–¹å¼\" class=\"headerlink\" title=\"ä¼˜åŒ–æœåŠ¡å™¨ç«¯æ¸²æŸ“æ–¹å¼\"></a>ä¼˜åŒ–æœåŠ¡å™¨ç«¯æ¸²æŸ“æ–¹å¼</h3><hr>\n<p>è¿™ä¸ªæ˜¯å¤§è¯é¢˜ï¼Œè¯·å¬ä¸‹å›ã€react16 ç³»åˆ—ï¼ˆ2ï¼‰ã€‘åˆ†æğŸ˜Š</p>\n","categories":[{"name":"react","slug":"react","count":3,"path":"api/categories/react.json"}],"tags":[{"name":"react","slug":"react","count":3,"path":"api/tags/react.json"},{"name":"react16","slug":"react16","count":1,"path":"api/tags/react16.json"}]}